<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BlinkAI - å°ˆç‚ºç²‰çµ²æ‰“é€ çš„ AI çŸ¥è­˜åº«èˆ‡åŠ©ç†</title>
    <!-- ğŸ”¥ GitHub Pages éƒ¨ç½²è·¯å¾‘ä¿®æ­£ï¼šç¢ºä¿æ‰€æœ‰ç›¸å°è·¯å¾‘ (å¦‚ CSS, JS) æ­£ç¢ºè¼‰å…¥ ğŸ”¥ -->
    <base href="/BlinkAI/"> 
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <!-- å¼•å…¥ Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* ------------------------- å…±åŒæ¨£å¼ ------------------------- */
        body {
            font-family: 'Lato', sans-serif;
            background-color: #111827;
            color: #d1d5db;
            transition: background-color 0.3s;
            overflow-x: hidden; /* é˜²æ­¢æ°´å¹³æ²å‹• */
        }
                h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
        }

        /* ä¸»è‰²èª¿ - BLACKPINK ç²‰è‰² */
        .text-primary { color: #f472b6; }
        .bg-primary { background-color: #f472b6; }
        .border-primary { border-color: #f472b6; }

        /* æ¬¡è¦è‰²èª¿ - æ·ºç²‰è‰² */
        .text-secondary { color: #f9a8d4; }
        .bg-secondary { background-color: #f9a8d4; }

        /* èƒŒæ™¯æ¼¸å±¤ */
        .gradient-bg {
            background: linear-gradient(180deg, #111827 0%, #1f2937 100%);
        }

        /* ç»ç’ƒæ“¬æ…‹æ•ˆæœ */
        .glass-card {
            background: rgba(31, 41, 55, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* Safari æ”¯æ´ */
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* å€å¡Šæ¨™é¡Œ */
        .section-title {
            @apply text-3xl md:text-4xl font-bold text-center mb-4; /* æ‰‹æ©Ÿç‰ˆå­—é«”ç¸®å° */
            color: #f9a8d4;
        }
        .section-subtitle {
            @apply text-lg md:text-xl text-gray-400 text-center max-w-2xl mx-auto mb-12 px-4;
        }

        /* å°èˆªæ¬„ */
        nav {
            background: rgba(17, 24, 39, 0.9);
            backdrop-filter: blur(10px);
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            @apply px-6 py-3 rounded-full font-bold text-lg transition-all duration-300 inline-block cursor-pointer select-none;
        }
        .btn-primary {
            @apply bg-primary text-gray-900;
        }
        .btn-primary:hover {
            @apply bg-secondary scale-105;
        }
        .btn-outline {
            @apply bg-transparent border-2 border-primary text-primary;
        }
        .btn-outline:hover {
            @apply bg-primary text-gray-900 scale-105;
        }

        /* --- LINE æŒ‰éˆ•æ¨£å¼ --- */
        .btn-line {
            background-color: #06C755;
            color: white;
        }
        .btn-line:hover {
            background-color: #05b34c;
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(6, 199, 85, 0.3);
        }

        /* ç‰¹è‰²å¡ç‰‡ */
        .feature-card {
            @apply glass-card p-6 md:p-8 rounded-2xl flex flex-col items-center text-center transition-all duration-300;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            border-color: #f472b6;
        }
        .feature-card .icon {
            @apply text-4xl md:text-5xl mb-4 md:mb-6;
            color: #f472b6;
        }

        /* ------------------------- CANVAS ç›¸é—œæ¨£å¼ ------------------------- */
        
        /* æ›¿æ›åŸæœ‰çš„ .hero-bg æ¨£å¼ï¼Œä½¿ç”¨ Canvas ä½œç‚ºèƒŒæ™¯ */
        #hero-header {
            background-color: #111827; /* åŸºç¤èƒŒæ™¯è‰² */
            /* æ·»åŠ ä¸€å€‹æ·±è‰²æ¼¸å±¤ç–ŠåŠ å±¤ï¼Œè®“æ–‡å­—æ›´æ¸…æ™° */
            box-shadow: inset 0 -100px 50px -50px #111827; 
        }

        /* ç¢ºä¿ Canvas ä½ˆæ»¿å®¹å™¨ */
        #heroCanvas {
            display: block;
            filter: brightness(0.7); /* é™ä½äº®åº¦ï¼Œè®“æ–‡å­—æ›´çªå‡º */
        }
        /* ------------------------- èŠå¤©å®¤æ¨£å¼ ------------------------- */
        .chat-bubble {
            @apply p-3 md:p-4 rounded-2xl max-w-[85%] md:max-w-lg transition-all duration-300 text-sm md:text-base;
        }
        .user-bubble {
            @apply bg-gray-700 text-white rounded-br-none ml-auto;
        }
        .ai-bubble {
            @apply bg-primary text-gray-900 rounded-bl-none mr-auto;
        }
        .ai-bubble-error {
            @apply !bg-red-500 !text-white;
        }
        .ai-bubble .source {
            @apply mt-2 md:mt-3 pt-2 md:pt-3 border-t border-pink-800/30 text-xs md:text-sm text-gray-800;
        }
        .ai-bubble .source-title {
            @apply font-bold;
        }

        /* è¼‰å…¥å‹•ç•« */
        .loading-dots span {
            @apply w-2 h-2 bg-gray-400 rounded-full inline-block;
            animation: bounce 1.4s infinite both;
        }
        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }

        /* ------------------------- LINE æ¨¡å¼æ¨£å¼ ------------------------- */
        body.line-mode {
            background-color: #f0f0f0;
            /* é˜²æ­¢æ²å‹• */
            height: 100dvh; 
            overflow: hidden;
        }
        .line-mode #chat-assistant .glass-card {
            background: #8c9eff; /* LINE ç¶“å…¸è—èƒŒæ™¯ */
            border: none;
            border-radius: 0;
            height: 100dvh !important; /* ä½¿ç”¨ dvh è§£æ±ºæ‰‹æ©Ÿç¶²å€åˆ—é®æ“‹ */
            max-height: 100dvh;
            width: 100%;
        }
        .line-mode #chat-assistant {
            padding: 0 !important; /* å…¨è¢å¹• */
            height: 100dvh;
        }
        .line-mode .user-bubble {
            background-color: #96f26d !important; /* LINE ç¶  */
            color: black !important;
            border-radius: 18px;
            border-top-right-radius: 2px;
        }
        .line-mode .ai-bubble {
            background-color: white !important;
            color: black !important;
            border-radius: 18px;
            border-top-left-radius: 2px;
        }
        .line-mode .chat-header {
            background-color: #2c3e50 !important;
            color: white;
            border-bottom: none;
            padding-top: env(safe-area-inset-top); /* é¿é–‹ç€æµ· */
        }
        .line-mode #chat-form {
            background-color: white !important;
            padding-bottom: max(1rem, env(safe-area-inset-bottom)); /* é¿é–‹åº•éƒ¨æ©«æ¢ */
        }
        .line-mode #chat-input {
            background-color: #f3f4f6;
            color: black;
        }
        .line-mode #send-button {
            background-color: #2563eb;
            color: white;
        }
        .line-mode .source {
            border-top-color: #eee;
            color: #666;
        }
        .line-mode #web-nav-controls {
            display: none;
        }

        /* æ‰‹æ©Ÿé¸å–®å‹•ç•« */
        #mobile-menu {
            transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }
        #mobile-menu.open {
            max-height: 400px;
            opacity: 1;
        }
    </style>
</head>
<body class="antialiased">

    <!-- 1. å®˜ç¶²è¦–åœ– (Landing Page) -->
    <div id="landing-page">
        <!-- å°èˆªæ¬„ -->
        <nav class="sticky top-0 z-50 w-full shadow-lg">
            <div class="container mx-auto px-4 md:px-6 py-4">
                <div class="flex justify-between items-center">
                    <h1 class="text-2xl md:text-3xl font-bold text-primary z-50">BlinkAI</h1>
                                        <!-- é›»è…¦ç‰ˆé¸å–® -->
                    <div class="hidden md:flex space-x-6 items-center">
                        <a href="#problem" class="text-gray-300 hover:text-primary transition">å¸‚å ´ç—›é»</a>
                        <a href="#solution" class="text-gray-300 hover:text-primary transition">è§£æ±ºæ–¹æ¡ˆ</a>
                        <a href="#tech" class="text-gray-300 hover:text-primary transition">æ ¸å¿ƒæŠ€è¡“</a>
                        <a href="#line-integration" class="text-gray-300 hover:text-[#06C755] transition"><i class="fa-brands fa-line"></i> LINE æœå‹™</a>
                        <a href="#pricing" class="text-gray-300 hover:text-primary transition">å®šåƒ¹æ–¹æ¡ˆ</a>
                        <a href="#" onclick="showChatView(); return false;" class="btn btn-primary !px-5 !py-2 !text-base">æ¶å…ˆé«”é©—</a>
                    </div>

                    <!-- æ‰‹æ©Ÿç‰ˆæ¼¢å ¡æŒ‰éˆ• -->
                    <button id="menu-btn" class="md:hidden text-white text-2xl focus:outline-none z-50" onclick="toggleMobileMenu()">
                        <i class="fa-solid fa-bars"></i>
                    </button>
                </div>

                <!-- æ‰‹æ©Ÿç‰ˆä¸‹æ‹‰é¸å–® -->
                <div id="mobile-menu" class="md:hidden absolute top-full left-0 w-full bg-gray-900/95 backdrop-blur-xl border-b border-gray-700 shadow-2xl">
                    <div class="flex flex-col p-6 space-y-4 text-center">
                        <a href="#problem" onclick="toggleMobileMenu()" class="text-lg text-gray-300 hover:text-primary py-2">å¸‚å ´ç—›é»</a>
                        <a href="#solution" onclick="toggleMobileMenu()" class="text-lg text-gray-300 hover:text-primary py-2">è§£æ±ºæ–¹æ¡ˆ</a>
                        <a href="#tech" onclick="toggleMobileMenu()" class="text-lg text-gray-300 hover:text-primary py-2">æ ¸å¿ƒæŠ€è¡“</a>
                        <a href="#line-integration" onclick="toggleMobileMenu()" class="text-lg text-gray-300 hover:text-[#06C755] py-2"><i class="fa-brands fa-line"></i> LINE æœå‹™</a>
                        <a href="#pricing" onclick="toggleMobileMenu()" class="text-lg text-gray-300 hover:text-primary py-2">å®šåƒ¹æ–¹æ¡ˆ</a>
                        <a href="#" onclick="showChatView(); toggleMobileMenu(); return false;" class="btn btn-primary !w-full mt-2">æ¶å…ˆé«”é©—</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero å€å¡Š (å·²æ•´åˆ Canvas ç²’å­èƒŒæ™¯) -->
        <header id="hero-header" class="relative min-h-[80vh] flex items-center">
            <!-- 1. Canvas å…ƒç´  (ä½œç‚ºèƒŒæ™¯ï¼Œçµ•å°å®šä½) -->
            <canvas id="heroCanvas" class="absolute inset-0 z-0"></canvas>
            
            <!-- 2. å…§å®¹å±¤ (ç›¸å°å®šä½ï¼Œz-index ç¢ºä¿åœ¨ Canvas ä¸Šæ–¹) -->
            <div class="container mx-auto px-4 md:px-6 py-20 md:py-48 text-center text-white relative z-10">
                <h1 class="text-5xl md:text-7xl font-extrabold mb-6 leading-tight">BlinkAI</h1>
                <p class="text-xl md:text-3xl font-light mb-10 md:mb-12 text-secondary px-2">ç‚ºç²‰çµ²æº–ç¢ºæ€§èˆ‡äº’å‹•åƒèˆ‡è€Œç”Ÿçš„å°ˆç²¾ AI å¹³å°</p>
                <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                    <a href="#" onclick="showChatView(); return false;" class="btn btn-primary !text-lg md:!text-xl !py-3 md:!py-4 !px-8 shadow-lg shadow-pink-500/30 hover:shadow-pink-500/50 hover:scale-105 transition-all duration-500 w-full sm:w-auto">æ¶å…ˆè©¦ç”¨ AI åŠ©ç†</a>
                </div>
            </div>
        </header>

        <!-- å¸‚å ´ç—›é» (The Problem) -->
        <section id="problem" class="py-16 md:py-24 gradient-bg">
            <div class="container mx-auto px-4 md:px-6">
                <h2 class="section-title">ç²‰çµ²è³‡è¨Šçš„å±æ©Ÿ</h2>
                <p class="section-subtitle">K-pop çš„çˆ†ç‚¸æ€§å¢é•·å‰µé€ äº†ä¸€å€‹é¾å¤§ä½†æ··äº‚çš„æ•¸æ“šç”Ÿæ…‹ç³»çµ±ã€‚ç²‰çµ²åœ¨ç²å–å¯ä¿¡è³‡è¨Šæ™‚ï¼Œæ­£é¢è‡¨å‰æ‰€æœªæœ‰çš„æŒ‘æˆ°ã€‚</p>
                                <div class="grid md:grid-cols-3 gap-6 md:gap-8">
                    <!-- ç—›é» 1 -->
                    <div class="feature-card">
                        <div class="icon"><i class="fa-solid fa-circle-exclamation"></i></div>
                        <h3 class="text-xl md:text-2xl font-bold text-white mb-3 md:mb-4">è³‡è¨Šéè¼‰èˆ‡éŒ¯èª¤</h3>
                        <p class="text-gray-300 text-sm md:text-base">ç¶²è·¯å……æ–¥è‘—ç²‰çµ²çŒœæ¸¬ã€éŒ¯èª¤ç¿»è­¯å’Œéæ™‚å…§å®¹ã€‚äº‹å¯¦èˆ‡è¬ è¨€æ··é›œï¼Œå°è‡´ç²‰çµ²å°é—œéµäº‹ä»¶ç”¢ç”ŸèªçŸ¥æ··æ·†ã€‚</p>
                    </div>
                    <!-- ç—›é» 2 -->
                    <div class="feature-card">
                        <div class="icon"><i class="fa-solid fa-robot"></i></div>
                        <h3 class="text-xl md:text-2xl font-bold text-white mb-3 md:mb-4">é€šç”¨ AI çš„ã€Œå¹»è¦ºã€</h3>
                        <p class="text-gray-300 text-sm md:text-base">é€šç”¨ AI ç‚ºäº†å›ç­”å•é¡Œï¼Œæœƒæé€ äº‹å¯¦ï¼ˆä¾‹å¦‚ï¼šLisa æ˜¯éšŠé•·ã€è™›æ§‹çš„å·¡æ¼”æ—¥æœŸï¼‰ï¼Œå°å°‹æ±‚æº–ç¢ºè³‡è¨Šçš„ç²‰çµ²é€ æˆåš´é‡å›°æ“¾ã€‚</p>
                    </div>
                    <!-- ç—›é» 3 -->
                    <div class="feature-card">
                        <div class="icon"><i class="fa-solid fa-baby"></i></div>
                        <h3 class="text-xl md:text-2xl font-bold text-white mb-3 md:mb-4">æ–°ç²‰çµ²çš„é«˜é–€æª»</h3>
                        <p class="text-gray-300 text-sm md:text-base">"Baby Blinks" é›£ä»¥å¿«é€Ÿå€åˆ†å®˜æ–¹äº‹å¯¦èˆ‡ç²‰çµ²ç†è«–ã€‚å…¥å‘çš„å­¸ç¿’æ›²ç·šé™¡å³­ï¼Œä¸”åœ¨ç¤¾ç¾¤ä¸­æå•æ™‚å¯èƒ½é¢è‡¨å£“åŠ›ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- è§£æ±ºæ–¹æ¡ˆ (The Solution) -->
        <section id="solution" class="py-16 md:py-24">
            <div class="container mx-auto px-4 md:px-6">
                <div class="grid md:grid-cols-2 gap-10 md:gap-16 items-center">
                    <div>
                        <img src="https://placehold.co/800x600/1f2937/f472b6?text=Solution"
                              alt=""
                              class="rounded-2xl shadow-2xl w-full">
                    </div>
                    <div>
                        <h2 class="text-3xl md:text-4xl font-bold text-secondary mb-4 md:mb-6">æˆ‘å€‘çš„å‰µæ–°è§£æ±ºæ–¹æ¡ˆï¼šBlinkAI</h2>
                        <h3 class="text-xl md:text-2xl font-semibold text-white mb-3 md:mb-4">å°ˆç²¾é ˜åŸŸ AI åŠ©ç†</h3>
                        <p class="mb-4 text-gray-300 text-sm md:text-base">BlinkAI æ˜¯ä¸€å€‹å°ˆç²¾é ˜åŸŸçš„ AI åŠ©ç†ã€‚æˆ‘å€‘ä¸ä½¿ç”¨é€šç”¨çš„ç¶²è·¯è³‡è¨Šï¼Œè€Œæ˜¯å»ºç«‹äº†ä¸€å€‹ã€ŒBLACKPINK å®˜æ–¹çŸ¥è­˜åº«ã€ï¼Œç¢ºä¿è³‡è¨Šçš„çµ•å°ç´”æ·¨ã€‚</p>
                        <h3 class="text-xl md:text-2xl font-semibold text-white mb-3 md:mb-4">RAG æ ¸å¿ƒæŠ€è¡“</h3>
                        <p class="mb-4 text-gray-300 text-sm md:text-base">æ ¸å¿ƒæŠ€è¡“ RAG (æª¢ç´¢å¢å¼·ç”Ÿæˆ)ï¼Œèƒ½ç¢ºä¿ AI çš„æ¯ä¸€å€‹å›ç­”éƒ½æœ‰ã€Œäº‹å¯¦ä¾æ“šã€ï¼Œå¾æ ¹æœ¬ä¸Šæœçµ•ã€Œå¹»è¦ºã€å’Œã€Œç²‰çµ²çŒœæ¸¬ã€ã€‚</p>
                        <h3 class="text-xl md:text-2xl font-semibold text-white mb-3 md:mb-4">å¹³å°ç‰¹æ€§</h3>
                        <p class="text-gray-300 mb-6 text-sm md:text-base">é€™æ˜¯ä¸€å€‹ç‚ºå…¨çƒ Blinks æ‰“é€ çš„ã€7x24 å°æ™‚ã€å¤šå¹³å°ï¼ˆWeb, Discord, LINEï¼‰æ”¯æ´ã€çµ•å°æº–ç¢ºçš„ AI å¤¥ä¼´ã€‚</p>
                        <a href="#" onclick="showChatView(); return false;" class="btn btn-primary !text-base md:!text-lg !inline-block mt-2 w-full md:w-auto text-center">ç«‹å³è©¦ç”¨ BlinkAI åŠ©ç†</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ ¸å¿ƒæŠ€è¡“ (Technology) -->
        <section id="tech" class="py-16 md:py-24 gradient-bg">
            <div class="container mx-auto px-4 md:px-6">
                <h2 class="section-title">BlinkAI æ ¸å¿ƒæŠ€è¡“</h2>
                <p class="section-subtitle">BlinkAI çš„æº–ç¢ºæ€§ä¾†è‡ªå…¶åš´è¬¹çš„é›™é‡æŠ€è¡“æ¶æ§‹ï¼šå°ˆæœ‰çŸ¥è­˜åº«èˆ‡ RAG å·¥ä½œæµç¨‹ã€‚</p>
                                <!-- æŠ€è¡“ 1: çŸ¥è­˜åº« -->
                <div class="grid md:grid-cols-2 gap-10 md:gap-16 items-center mb-16 md:mb-20">
                    <div>
                        <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">æŠ€è¡“ Iï¼šBlinkAI çŸ¥è­˜åº«</h3>
                        <p class="text-base md:text-lg text-gray-300 mb-6">BlinkAI çš„å¼·å¤§ä¸åœ¨æ–¼ LLMï¼Œè€Œåœ¨æ–¼å…¶ã€Œå°ˆæœ‰çš„çŸ¥è­˜åº«ã€ã€‚æˆ‘å€‘åƒ…å¾ç¶“éé©—è­‰çš„å®˜æ–¹ä¾†æºç²å–è³‡æ–™ï¼Œå»ºç«‹ä¸€å€‹ç´”æ·¨çš„å‘é‡è³‡æ–™åº« (Vector DB)ï¼Œä½œç‚º AI å›ç­”çš„å”¯ä¸€äº‹å¯¦ä¾†æºã€‚</p>
                        <ul class="list-disc list-inside text-gray-300 space-y-2 text-sm md:text-base">
                            <li>å®˜æ–¹æ–°èç¨¿èˆ‡å°ˆè¼¯ä»‹ç´¹</li>
                            <li>ã€ŠLight Up the Skyã€‹ç­‰ç´€éŒ„ç‰‡é€å­—ç¨¿</li>
                            <li>Vogue, Billboard ç­‰æ¬Šå¨åª’é«”çš„å®˜æ–¹æ¡è¨ª</li>
                            <li>å·²é©—è­‰çš„å·¡æ¼”æ•¸æ“šèˆ‡æ­Œæ›²ç‰ˆæ¬Šè³‡è¨Š</li>
                        </ul>
                    </div>
                    <div>
                        <img src="https://placehold.co/800x600/1f2937/f472b6?text=Knowledgebase"
                              alt=""
                              class="rounded-2xl shadow-2xl w-full">
                    </div>
                </div>

                <!-- æŠ€è¡“ 2: RAG -->
                <div class="grid md:grid-cols-2 gap-10 md:gap-16 items-center">
                    <div class="md:order-2">
                        <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">æŠ€è¡“ IIï¼šRAG å·¥ä½œæµç¨‹</h3>
                        <p class="text-base md:text-lg text-gray-300 mb-6">æˆ‘å€‘åˆ©ç”¨ RAG æµç¨‹åš´æ ¼æ§åˆ¶ AI è¼¸å‡ºï¼š</p>
                        <ol class="list-decimal list-inside text-gray-300 space-y-3 text-sm md:text-base">
                            <li><strong>æŸ¥è©¢ (Query):</strong> ç²‰çµ²æå‡ºå•é¡Œã€‚</li>
                            <li><strong>æª¢ç´¢ (Retrieve):</strong> ç³»çµ±é¦–å…ˆå¾ã€ŒBlink çŸ¥è­˜åº«ã€ä¸­æª¢ç´¢æœ€ç›¸é—œçš„å®˜æ–¹è³‡æ–™ã€‚</li>
                            <li><strong>å¢å¼· (Augment):</strong> ç³»çµ±å°‡ã€Œå®˜æ–¹è³‡æ–™ã€å’Œã€ŒåŸå§‹å•é¡Œã€æ‰“åŒ…ã€‚</li>
                            <li><strong>ç”Ÿæˆ (Generate):</strong> æœ€å¾Œæ‰å°‡ç¦®åŒ…äº¤çµ¦ LLMï¼Œä¸¦ç”¨å®¢è£½åŒ–æç¤ºè©æŒ‡ç¤ºå®ƒã€Œåªèƒ½æ ¹æ“šæä¾›çš„è³‡æ–™å›ç­”ã€ã€‚</li>
                        </ol>
                    </div>
                    <div class="md:order-1">
                         <img src="https://placehold.co/800x600/1f2937/f472b6?text=RAG+Flow"
                              alt=""
                              class="rounded-2xl shadow-2xl w-full">
                    </div>
                </div>
            </div>
        </section>

        <!-- LINE æ•´åˆå€å¡Š -->
        <section id="line-integration" class="py-16 md:py-24 bg-gray-900">
            <div class="container mx-auto px-4 md:px-6">
                <div class="glass-card p-8 md:p-12 rounded-3xl border-l-0 md:border-l-8 border-t-8 md:border-t-0 border-[#06C755] max-w-4xl mx-auto">
                    <div class="flex flex-col items-center text-center max-w-3xl mx-auto">
                        <h2 class="text-2xl md:text-3xl font-bold text-white mb-4"><i class="fa-brands fa-line text-[#06C755] mr-3"></i> BlinkAI åœ¨ LINE ä¸Šç‚ºæ‚¨æœå‹™</h2>
                        <p class="text-gray-300 mb-8 text-base md:text-lg leading-relaxed">
                            ä¸éœ€è¦ä¸‹è¼‰é¡å¤– Appã€‚ç›´æ¥åœ¨ LINE ä¸Šèˆ‡ BlinkAI å°è©±ï¼Œéš¨æ™‚éš¨åœ°æŸ¥è©¢å·¡æ¼”è³‡è¨Šã€æˆå“¡ç”Ÿæ—¥æˆ–é©—è­‰ç¶²è·¯è¬ è¨€ã€‚
                        </p>
                        <div class="flex flex-col sm:flex-row gap-4 w-full sm:w-auto">
                            <a href="https://line.me/R/ti/p/@360vgdow" target="_blank" class="btn btn-line text-center px-8 w-full sm:w-auto">
                                <i class="fa-solid fa-user-plus mr-2"></i> åŠ å…¥å¥½å‹
                            </a>
                            <button onclick="showChatView(true)" class="btn btn-outline text-white border-white hover:bg-white hover:text-gray-900 px-8 w-full sm:w-auto">
                                <i class="fa-solid fa-mobile-screen mr-2"></i> é è¦½ LINE ä»‹é¢
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç”¨æˆ¶ç•«åƒ (Personas) -->
        <section id="personas" class="py-16 md:py-24">
            <div class="container mx-auto px-4 md:px-6">
                <h2 class="section-title">ç‚ºæ¯ä¸€ç¨®ç²‰çµ²è€Œç”Ÿ</h2>
                <p class="section-subtitle">ç„¡è«–ä½ æ˜¯å‰›å…¥å‘çš„æ–°ç²‰ï¼Œé‚„æ˜¯è³‡æ·±å…§å®¹å‰µä½œè€…ï¼ŒBlinkAI éƒ½èƒ½æä¾›ä½ éœ€è¦çš„åƒ¹å€¼ã€‚</p>
                <div class="grid md:grid-cols-3 gap-6 md:gap-8">
                    <!-- Persona 1 -->
                    <div class="glass-card p-6 md:p-8 rounded-2xl transition-all duration-300 hover:border-primary">
                        <img src="https://placehold.co/200x200/1f2937/f472b6?text=Jenny"
                              alt=""
                              class="w-20 h-20 md:w-24 md:h-24 rounded-full mx-auto mb-6 border-4 border-primary object-cover">
                        <h3 class="text-xl md:text-2xl font-bold text-white text-center mb-2">Jenny (19)</h3>
                        <p class="text-center text-gray-400 mb-4">Baby Blink</p>
                        <p class="text-gray-300 text-sm md:text-base"><strong class="text-secondary">ç—›é»ï¼š</strong>è³‡è¨Šæ··äº‚ï¼Œæ€•å•ã€Œç¬¨å•é¡Œã€ã€‚</p>
                        <p class="text-gray-300 text-sm md:text-base mt-2"><strong class="text-secondary">éœ€è¦ï¼š</strong>å®‰å…¨ã€æº–ç¢ºçš„ 24/7 åš®å°ã€‚</p>
                    </div>
                    <!-- Persona 2 -->
                    <div class="glass-card p-6 md:p-8 rounded-2xl transition-all duration-300 hover:border-primary">
                        <img src="https://images.unsplash.com/photo-1557862921-3e16092bb49c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTYyNjA5NjYyNw&q=80&w=400"
                              alt=""
                              class="w-20 h-20 md:w-24 md:h-24 rounded-full mx-auto mb-6 border-4 border-primary object-cover"
                             onerror="this.onerror=null;this.src='https://placehold.co/200x200/1f2937/f472b6?text=Alex';">
                        <h3 class="text-xl md:text-2xl font-bold text-white text-center mb-2">Alex (28)</h3>
                        <p class="text-center text-gray-400 mb-4">å‰µä½œè€…</p>
                        <p class="text-gray-300 text-sm md:text-base"><strong class="text-secondary">ç—›é»ï¼š</strong>æŸ¥æ ¸äº‹å¯¦è€—æ™‚è²»åŠ›ã€‚</p>
                        <p class="text-gray-300 text-sm md:text-base mt-2"><strong class="text-secondary">éœ€è¦ï¼š</strong>å¯ä¿¡è³´çš„å–®ä¸€äº‹å¯¦ä¾†æºã€‚</p>
                    </div>
                    <!-- Persona 3 -->
                    <div class="glass-card p-6 md:p-8 rounded-2xl transition-all duration-300 hover:border-primary">
                        <img src="https://images.unsplash.com/photo-1507591064343-9af923e232b7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNDU4OXwwfDF8cmFuZG9tfHx8fHx8fHx8MTYyNjA5NjYyNw&q=80&w=400"
                              alt=""
                              class="w-20 h-20 md:w-24 md:h-24 rounded-full mx-auto mb-6 border-4 border-primary object-cover"
                             onerror="this.onerror=null;this.src='https://placehold.co/200x200/1f2937/f472b6?text=Bob';">
                        <h3 class="text-xl md:text-2xl font-bold text-white text-center mb-2">Bob (45)</h3>
                        <p class="text-center text-gray-400 mb-4">è¨˜è€…</p>
                        <p class="text-gray-300 text-sm md:text-base"><strong class="text-secondary">ç—›é»ï¼š</strong>é€šç”¨ AI æ•¸æ“šä¸å¯ç”¨ã€‚</p>
                        <p class="text-gray-300 text-sm md:text-base mt-2"><strong class="text-secondary">éœ€è¦ï¼š</strong>å•†æ¥­ç´š AI æŸ¥è©¢å¼•æ“ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- å®šåƒ¹æ–¹æ¡ˆ (Pricing) -->
        <section id="pricing" class="py-16 md:py-24 gradient-bg">
            <div class="container mx-auto px-4 md:px-6">
                <h2 class="section-title">é¸æ“‡é©åˆä½ çš„æ–¹æ¡ˆ</h2>
                <p class="section-subtitle">å¾å…è²»é–‹å§‹ï¼Œæˆ–å‡ç´šä»¥ç²å¾—ç„¡é™å¯èƒ½ã€‚</p>
                <div class="grid md:grid-cols-3 gap-6 md:gap-8 max-w-5xl mx-auto">
                    <!-- æ–¹æ¡ˆ 1: Freemium -->
                    <div class="glass-card p-6 md:p-8 rounded-2xl border-2 border-gray-700 flex flex-col order-2 md:order-1">
                        <h3 class="text-xl md:text-2xl font-bold text-white text-center mb-2">Freemium</h3>
                        <p class="text-gray-400 text-center mb-6 text-sm">é©åˆè¼•åº¦ä½¿ç”¨è€…</p>
                        <p class="text-4xl md:text-5xl font-extrabold text-white text-center mb-6">$0<span class="text-base md:text-lg text-gray-400"> USD</span></p>
                        <ul class="space-y-3 text-gray-300 mb-8 flex-grow text-sm md:text-base">
                            <li class="flex items-center"><i class="fa-solid fa-check text-primary mr-3"></i> æ¯æ—¥ 10 æ¬¡å…è²»æŸ¥è©¢</li>
                            <li class="flex items-center"><i class="fa-solid fa-check text-primary mr-3"></i> å­˜å–æ¨™æº–çŸ¥è­˜åº«</li>
                        </ul>
                        <a href="#" onclick="showChatView(); return false;" class="w-full text-center btn btn-primary">ç«‹å³é–‹å§‹</a>
                    </div>
                    <!-- æ–¹æ¡ˆ 2: Blink Plus -->
                    <div class="glass-card p-6 md:p-8 rounded-2xl border-2 border-primary flex flex-col shadow-2xl relative order-1 md:order-2 transform scale-105 md:scale-100">
                        <span class="absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2 bg-primary text-gray-900 text-xs md:text-sm font-bold px-4 py-1 rounded-full">æœ€å—æ­¡è¿</span>
                        <h3 class="text-xl md:text-2xl font-bold text-primary text-center mb-2">Blink Plus</h3>
                        <p class="text-gray-400 text-center mb-6 text-sm">é©åˆè³‡æ·±ç²‰çµ²</p>
                        <p class="text-4xl md:text-5xl font-extrabold text-white text-center mb-6">$9.99<span class="text-base md:text-lg text-gray-400"> / æœˆ</span></p>
                        <ul class="space-y-3 text-gray-300 mb-8 flex-grow text-sm md:text-base">
                            <li class="flex items-center"><i class="fa-solid fa-check text-primary mr-3"></i> <strong>ç„¡é™æ¬¡</strong> æŸ¥è©¢</li>
                            <li class="flex items-center"><i class="fa-solid fa-check text-primary mr-3"></i> çŸ¥è­˜åº«å³æ™‚æ›´æ–°</li>
                            <li class="flex items-center"><i class="fa-solid fa-check text-primary mr-3"></i> LINE å¹³å°æ”¯æ´</li>
                        </ul>
                        <a href="#" class="w-full text-center btn btn-primary">ç«‹å³å‡ç´š</a>
                    </div>
                    <!-- æ–¹æ¡ˆ 3: Media API -->
                    <div class="glass-card p-6 md:p-8 rounded-2xl border-2 border-gray-700 flex flex-col order-3">
                        <h3 class="text-xl md:text-2xl font-bold text-white text-center mb-2">Media API</h3>
                        <p class="text-gray-400 text-center mb-6 text-sm">é©åˆä¼æ¥­</p>
                        <p class="text-3xl md:text-4xl font-extrabold text-white text-center mb-6">ä¼æ¥­å ±åƒ¹</p>
                        <ul class="space-y-3 text-gray-300 mb-8 flex-grow text-sm md:text-base">
                            <li class="flex items-center"><i class="fa-solid fa-check text-primary mr-3"></i> API å­˜å–æ¬Šé™</li>
                            <li class="flex items-center"><i class="fa-solid fa-check text-primary mr-3"></i> B2B è¶¨å‹¢å ±å‘Š</li>
                        </ul>
                        <a href="#" class="w-full text-center btn btn-outline">è¯ç¹«æˆ‘å€‘</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="py-8 md:py-12 bg-gray-900">
            <div class="container mx-auto px-6 text-center text-gray-400 text-sm md:text-base">
                <p class="text-2xl font-bold text-primary mb-4">BlinkAI</p>
                <div class="flex flex-col md:flex-row justify-center gap-4 md:gap-6 mb-4">
                    <a href="#solution" class="hover:text-primary">è§£æ±ºæ–¹æ¡ˆ</a>
                    <a href="#tech" class="hover:text-primary">æ ¸å¿ƒæŠ€è¡“</a>
                    <a href="#pricing" class="hover:text-primary">å®šåƒ¹æ–¹æ¡ˆ</a>
                </div>
                <p>&copy; 2025 BlinkAI. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- 2. AI åŠ©ç†è¦–åœ– (Chat Assistant) -->
    <div id="chat-assistant" class="hidden min-h-screen">
        <!-- é‡å°æ‰‹æ©Ÿç‰ˆå„ªåŒ–çš„ Containerï¼Œä½¿ç”¨ dvh ç¢ºä¿å…¨è¢å¹• -->
        <div class="container mx-auto max-w-3xl h-full flex flex-col p-4 md:p-12 min-h-[100dvh]">
                        <!-- é ‚éƒ¨å°èˆª -->
            <div id="web-nav-controls" class="flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-8 gap-4">
                <div class="flex items-center justify-between w-full md:w-auto">
                    <h1 class="text-2xl md:text-3xl font-bold text-primary">BlinkAI åŠ©ç†</h1>
                    <a href="#" onclick="showLandingView(); return false;" class="md:hidden text-gray-400 hover:text-primary text-sm">è¿”å›å®˜ç¶²</a>
                </div>
                <div class="flex items-center gap-4 self-end md:self-auto">
                    <!-- LINE æ¨¡å¼åˆ‡æ›æŒ‰éˆ• -->
                    <button onclick="toggleLineMode()" class="text-xs md:text-sm px-3 py-1 border border-gray-600 rounded-full text-gray-400 hover:text-[#06C755] hover:border-[#06C755] transition">
                        <i class="fa-brands fa-line mr-1"></i> åˆ‡æ›ä»‹é¢
                    </button>
                    <a href="#" onclick="showLandingView(); return false;" class="hidden md:inline text-gray-400 hover:text-primary transition-colors">&larr; è¿”å›å®˜ç¶²</a>
                </div>
            </div>
            <p id="web-intro" class="text-gray-400 text-center mb-4 md:mb-10 text-sm md:text-base px-2">
                æ‚¨å¯ä»¥å•æˆ‘ä»»ä½•é—œæ–¼ BLACKPINK çš„å•é¡Œã€‚<br class="hidden md:inline">
                è©¦è‘—å•ï¼š<strong class="text-white">ã€ŒBLACKPINK çš„éšŠé•·æ˜¯èª°ï¼Ÿã€</strong>
            </p>
            <!-- èŠå¤©å®¤çª—å£ -->
            <!-- ä½¿ç”¨ flex-1 è®“å®ƒä½”æ“šå‰©é¤˜ç©ºé–“ï¼Œæ‰‹æ©Ÿç‰ˆé«˜åº¦èª¿æ•´ -->
            <div class="glass-card rounded-2xl shadow-2xl overflow-hidden flex flex-col flex-1 md:h-[70vh] max-h-[80dvh] md:max-h-none">
                <!-- èŠå¤©å®¤é ­éƒ¨ -->
                <div class="chat-header p-3 md:p-4 bg-gray-900/50 border-b border-gray-700 relative flex-shrink-0">
                    <h2 class="text-lg md:text-2xl font-bold text-white text-center">BlinkAI åŠ©ç†</h2>
                    <button class="text-gray-400 hover:text-gray-600 absolute right-4 top-1/2 -translate-y-1/2 hidden p-2" id="close-line-btn" onclick="showLandingView()">
                        <i class="fa-solid fa-xmark text-xl"></i>
                    </button>
                </div>
                                <!-- èŠå¤©å…§å®¹ -->
                <div id="chat-content" class="p-4 md:p-8 space-y-4 md:space-y-6 flex-1 overflow-y-auto bg-transparent">
                    <!-- åˆå§‹æ­¡è¿è¨Šæ¯ -->
                    <div class="chat-bubble ai-bubble">
                        <p class="font-bold"><i class="fa-solid fa-check-circle mr-2"></i> BlinkAI åŠ©ç†ï¼š</p>
                        <p>æ‚¨å¥½ï¼æˆ‘æ˜¯ BlinkAI åŠ©ç†ã€‚æ‚¨å¯ä»¥å•æˆ‘ä»»ä½•é—œæ–¼ BLACKPINK çš„å•é¡Œã€‚</p>
                        <p class="mt-2">è©¦è‘—å•æˆ‘ï¼šã€ŒéšŠé•·æ˜¯èª°ï¼Ÿã€</p>
                    </div>
                </div>
                <!-- è¼‰å…¥ä¸­æŒ‡ç¤ºå™¨ -->
                <div id="loading-indicator" class="p-2 text-center text-gray-400 hidden flex-shrink-0">
                    <div class="loading-dots">
                        <span></span><span></span><span></span>
                    </div>
                    <span class="ml-2 text-xs md:text-sm">BlinkAI æ­£åœ¨æ€è€ƒä¸­...</span>
                </div>
                <!-- è¼¸å…¥æ¡† -->
                <form id="chat-form" class="p-3 md:p-4 bg-gray-900/50 border-t border-gray-700 flex-shrink-0">
                    <div class="flex items-center p-2 md:p-3 rounded-full bg-gray-800 border border-gray-700">
                        <input
                            type="text"
                            id="chat-input"
                            placeholder="è¼¸å…¥æ‚¨çš„å•é¡Œ..."
                            class="bg-transparent text-white w-full focus:outline-none ml-2 text-base"
                             autocomplete="off"
                        >
                        <!-- è¨»ï¼šinput text-base (16px) å¯é˜²æ­¢ iOS Safari è‡ªå‹•ç¸®æ”¾ -->
                        <button
                            type="submit"
                            id="send-button"
                            class="bg-primary text-gray-900 rounded-full w-8 h-8 md:w-10 md:h-10 flex items-center justify-center ml-2 flex-shrink-0 transition-transform duration-200 hover:scale-110 active:scale-95"
                        >
                            <i class="fa-solid fa-paper-plane text-sm md:text-base"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 3. JavaScript é‚è¼¯ -->
    <script type="module">
    /* ------------------------- CANVAS ç²’å­å‹•ç•«é‚è¼¯ ------------------------- */
    const canvas = document.getElementById('heroCanvas');
    const ctx = canvas ? canvas.getContext('2d') : null;
    const particles = [];
    const particleCount = 75; // ç²’å­æ•¸é‡
    const mouse = { x: null, y: null, radius: 100 };

    // ç²’å­é¡è‰²ï¼šç²‰è‰² (Primary)ã€ç™½è‰² (Neutral)ã€æ·±ç° (Secondary)
    const colors = ['#f472b6', '#ffffff', '#1f2937']; 

    if (canvas && ctx) {
        // èª¿æ•´ Canvas å°ºå¯¸
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        // è¿½è¹¤æ»‘é¼ ä½ç½® (ç”¨æ–¼äº’å‹•)
        window.addEventListener('mousemove', (event) => {
            // ä¿®æ­£åº§æ¨™ç‚ºç›¸å°æ–¼ Canvas é ‚éƒ¨
            const rect = canvas.getBoundingClientRect();
            mouse.x = event.clientX - rect.left;
            mouse.y = event.clientY - rect.top;
        });

        // ç²’å­é¡åˆ¥
        class Particle {
            constructor(x, y, directionX, directionY, size, color) {
                this.x = x;
                this.y = y;
                // ç¢ºä¿ç²’å­ç§»å‹•ç·©æ…¢
                this.directionX = directionX * 0.5; 
                this.directionY = directionY * 0.5;
                this.size = size;
                this.color = color;
            }

            // ç¹ªè£½ç²’å­
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color;
                ctx.fill();
            }

            // æ›´æ–°ä½ç½®å’Œæª¢æŸ¥äº’å‹•
            update() {
                // ç²’å­ç¢°æ’é‚Šç•Œåå½ˆ
                if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;

                this.x += this.directionX;
                this.y += this.directionY;

                // æª¢æŸ¥æ»‘é¼ äº’å‹•
                if (mouse.x !== null) {
                    let dx = mouse.x - this.x;
                    let dy = mouse.y - this.y;
                    let distance = Math.sqrt(dx*dx + dy*dy);

                    if (distance < mouse.radius) {
                        this.size = 2; // é è¿‘æ™‚è®Šå¤§
                        this.color = '#f9a8d4'; // é è¿‘æ™‚è®Šæˆæ·ºç²‰è‰²
                    } else {
                        // æ¢å¾©å¤§å°å’Œé¡è‰²
                        this.size = Math.random() * 2 + 0.5; 
                        this.color = colors[Math.floor(Math.random() * colors.length)]; 
                    }
                }
                
                this.draw();
            }
        }

        // å‰µå»ºç²’å­é™£åˆ—
        function initParticles() {
            for (let i = 0; i < particleCount; i++) {
                let size = Math.random() * 2 + 0.5;
                let x = Math.random() * (canvas.width - size * 2) + size;
                let y = Math.random() * (canvas.height - size * 2) + size;
                let directionX = (Math.random() * 1) - 0.5; // é€Ÿåº¦ç¯„åœ -0.5 åˆ° 0.5
                let directionY = (Math.random() * 1) - 0.5;
                let color = colors[Math.floor(Math.random() * colors.length)];
                
                particles.push(new Particle(x, y, directionX, directionY, size, color));
            }
        }

        // ç¹ªè£½å‹•ç•«å¾ªç’°
        function animate() {
            requestAnimationFrame(animate);
            ctx.clearRect(0, 0, canvas.width, canvas.height); // æ¸…é™¤ä¸Šä¸€å¹€
            
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
            }

            // ç¹ªè£½ç²’å­ä¹‹é–“çš„ç·šæ¢
            for (let a = 0; a < particles.length; a++) {
                for (let b = a; b < particles.length; b++) {
                    let distance = Math.sqrt(
                        Math.pow(particles[a].x - particles[b].x, 2) + 
                        Math.pow(particles[a].y - particles[b].y, 2)
                    );

                    if (distance < 70) { // ç²’å­å¤ è¿‘æ™‚é€£ç·š
                        ctx.strokeStyle = `rgba(244, 114, 182, ${1 - (distance/70)})`; // è·é›¢è¶Šè¿‘ï¼Œç·šæ¢è¶Šä¸é€æ˜
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(particles[a].x, particles[a].y);
                        ctx.lineTo(particles[b].x, particles[b].y);
                        ctx.stroke();
                    }
                }
            }
        }

        // ç¢ºä¿åœ¨è¦–çª—è¼‰å…¥å®Œæˆå¾Œå•Ÿå‹•å‹•ç•«
        window.onload = function() {
            initParticles();
            animate();
        }
    }
    
    /* ------------------------- è¦–åœ–åˆ‡æ›é‚è¼¯ ------------------------- */
    const landingPage = document.getElementById('landing-page');
    const chatAssistant = document.getElementById('chat-assistant');
    const body = document.body;
    let isLineMode = false;

    window.toggleMobileMenu = function() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('open');
        menu.classList.toggle('hidden'); // Toggle hidden to ensure display logic works with animation

        // å°å‹•ç•«é‚è¼¯
        if (!menu.classList.contains('hidden')) {
            menu.classList.remove('open');
            setTimeout(() => menu.classList.add('open'), 10);
        }
    }

    window.showLandingView = function () {
        landingPage.classList.remove('hidden');
        chatAssistant.classList.add('hidden');
        body.classList.remove('p-0'); 
        window.scrollTo(0, 0);
        if (isLineMode) toggleLineMode(); 
    }

    window.showChatView = function (startLineMode = false) {
        landingPage.classList.add('hidden');
        chatAssistant.classList.remove('hidden');
        // æ‰‹æ©Ÿç‰ˆä¸åŠ  padding ä»¥çˆ­å–ç©ºé–“
        if (window.innerWidth >= 768) { 
             // body.classList.add('p-12'); // Removed body padding to handle full height better via container
        }
        window.scrollTo(0, 0);

        if (startLineMode && !isLineMode) {
            toggleLineMode();
        }
    }

    // --- LINE æ¨¡å¼åˆ‡æ› ---
    window.toggleLineMode = function() {
        isLineMode = !isLineMode;
        const navControls = document.getElementById('web-nav-controls');
        const intro = document.getElementById('web-intro');
        const headerTitle = document.querySelector('.chat-header h2');
        const closeBtn = document.getElementById('close-line-btn');
        const chatContainer = document.querySelector('#chat-assistant .glass-card');
        const containerDiv = document.querySelector('#chat-assistant .container');

        if (isLineMode) {
            body.classList.add('line-mode');
            navControls.style.display = 'none';
            intro.style.display = 'none';
            headerTitle.innerText = 'BlinkAI (å®˜æ–¹å¸³è™Ÿ)';
            closeBtn.classList.remove('hidden');
                        
            // å¼·åˆ¶å…¨è¢å¹•é…ç½®
            containerDiv.classList.remove('p-4', 'md:p-12');
            containerDiv.classList.add('!p-0', '!max-w-full');
        } else {
            body.classList.remove('line-mode');
            navControls.style.display = 'flex';
            intro.style.display = 'block';
            headerTitle.innerText = 'BlinkAI åŠ©ç†';
            closeBtn.classList.add('hidden');

            // æ¢å¾©ä¸€èˆ¬é…ç½®
            containerDiv.classList.add('p-4', 'md:p-12');
            containerDiv.classList.remove('!p-0', '!max-w-full');
        }
    }

    /* ------------------------- èŠå¤©å®¤åŠŸèƒ½é‚è¼¯ ------------------------- */

    // DOM å…ƒç´ 
    const chatContent = document.getElementById('chat-content');
    const chatForm = document.getElementById('chat-form');
    const chatInput = document.getElementById('chat-input');
    const sendButton = document.getElementById('send-button');
    const loadingIndicator = document.getElementById('loading-indicator');

    const apiKey = ""; 
    const apiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=" + encodeURIComponent(apiKey);

    // --- æ¨¡æ“¬ RAG çš„çŸ¥è­˜åº« (ä¿æŒåŸæ¨£) ---
    const ragDatabase = {
        "captain": { answer: "BLACKPINK å®˜æ–¹æ²’æœ‰éšŠé•·ã€‚\n\nåœ¨ã€ŠStar Roadã€‹2018 è¨ªå•ä¸­ï¼Œæˆå“¡è¡¨ç¤ºå¥¹å€‘ä»¥æœ‹å‹æ–¹å¼ç›¸è™•ï¼Œå› æ­¤ä¸è¨­éšŠé•·ã€‚", source: "ã€ŠStar Roadã€‹æ¡è¨ªï¼ˆ2018-10-26ï¼‰" },
        "birthday_jisoo": { answer: "Jisooï¼ˆé‡‘æ™ºç§€ï¼‰ç”Ÿæ—¥æ˜¯ **1995 å¹´ 1 æœˆ 3 æ—¥**ã€‚", source: "YG å®˜æ–¹è³‡æ–™" },
        "birthday_jennie": { answer: "Jennieï¼ˆé‡‘æ™ºå¦®ï¼‰ç”Ÿæ—¥æ˜¯ **1996 å¹´ 1 æœˆ 16 æ—¥**ã€‚", source: "YG å®˜æ–¹è³‡æ–™" },
        "birthday_rosÃ©": { answer: "RosÃ©ï¼ˆæœ´å½©è‹±ï¼‰ç”Ÿæ—¥æ˜¯ **1997 å¹´ 2 æœˆ 11 æ—¥**ã€‚", source: "YG å®˜æ–¹è³‡æ–™" },
        "birthday_lisa": { answer: "Lisaï¼ˆLalisa Manobalï¼‰ç”Ÿæ—¥æ˜¯ **1997 å¹´ 3 æœˆ 27 æ—¥**ã€‚", source: "YG å®˜æ–¹è³‡æ–™" },
        "debut": { answer: "BLACKPINK æ–¼ **2016 å¹´ 8 æœˆ 8 æ—¥**æ­£å¼å‡ºé“ï¼Œæ¨å‡ºã€ŠBOOMBAYAHã€‹èˆ‡ã€ŠWHISTLEã€‹ã€‚", source: "YG å®˜æ–¹å…¬å‘Šï¼ˆ2016-08-08ï¼‰" },
        "kaohsiung": { answer: "BLACKPINK æ–¼ **2023 å¹´ 3 æœˆ 18â€“19 æ—¥**åœ¨ **é«˜é›„åœ‹å®¶é«”è‚²å ´ï¼ˆä¸–é‹ä¸»å ´é¤¨ï¼‰** èˆ‰è¾¦ã€ŠBORN PINKã€‹ä¸–ç•Œå·¡è¿´æ¼”å”±æœƒé«˜é›„å ´ã€‚", source: "BORN PINK WORLD TOUR å®˜æ–¹è³‡æ–™" }
    };

    if (chatForm) {
        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const queryText = chatInput.value.trim();
            if (!queryText) return;

            // é€™è£¡åŠ å…¥ scrollIntoView ç¢ºä¿æ‰‹æ©Ÿéµç›¤è·³å‡ºæ™‚èƒ½çœ‹åˆ°å°è©±
            setTimeout(() => {
                chatContent.lastElementChild?.scrollIntoView({behavior: "smooth"});
            }, 100);

            addMessageToChat('user', 'ç²‰çµ²æå•ï¼š', queryText);
            chatInput.value = "";
            handleAIResponse(queryText);
        });
    }

    function replyRAG(key) {
        const entry = ragDatabase[key];
        setTimeout(() => {
            addMessageToChat('ai', 'BlinkAI åŠ©ç†ï¼š', entry.answer, entry.source);
            setLoading(false);
        }, 500);
        return;
    }

    async function handleAIResponse(query) {
        setLoading(true);
        const lowerQuery = query.toLowerCase();

        if (lowerQuery.includes("éšŠé•·") || lowerQuery.includes("captain")) return replyRAG("captain");
        if (lowerQuery.includes("ç”Ÿæ—¥") || lowerQuery.includes("birth")) {
            if (lowerQuery.includes("jisoo") || lowerQuery.includes("æ™ºç§€")) return replyRAG("birthday_jisoo");
            if (lowerQuery.includes("jennie") || lowerQuery.includes("çå¦®")) return replyRAG("birthday_jennie");
            if (lowerQuery.includes("rosÃ©") || lowerQuery.includes("rose")) return replyRAG("birthday_rosÃ©");
            if (lowerQuery.includes("lisa") || lowerQuery.includes("è‰è")) return replyRAG("birthday_lisa");
        }
        if (lowerQuery.includes("å‡ºé“") || lowerQuery.includes("debut")) return replyRAG("debut");
        if (lowerQuery.includes("é«˜é›„") && lowerQuery.includes("æ¼”å”±æœƒ")) return replyRAG("kaohsiung");

        const MAX_RETRIES = 5;
        for (let attempt = 0; attempt < MAX_RETRIES; attempt++) {
            try {
                const payload = {
                    systemInstruction: { parts: [{ text: "You are BlinkAI, an AI assistant for BLACKPINK fans. Friendly, factual, Traditional Chinese." }] },
                    contents: [{ role: "user", parts: [{ text: query }] }]
                };
                const response = await fetch(apiUrl, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(payload) });
                if (response.status === 429 && attempt < MAX_RETRIES - 1) {
                    await new Promise(r => setTimeout(r, Math.pow(2, attempt) * 1000)); continue;
                }
                if (!response.ok) throw new Error("API Error");
                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                if (text) addMessageToChat('ai', 'BlinkAI åŠ©ç†ï¼š', text);
                else throw new Error("No content");
                break;
            } catch (err) {
                console.error(err);
                if (attempt === MAX_RETRIES - 1) addMessageToChat('ai', 'BlinkAI åŠ©ç† (éŒ¯èª¤)ï¼š', 'æŠ±æ­‰ï¼Œç›®å‰ç„¡æ³•é€£ç·šã€‚', null, 'error');
            }
        }
        setLoading(false);
    }

    function addMessageToChat(role, sender, text, source = null, type = 'normal') {
        const bubble = document.createElement('div');
        bubble.classList.add('chat-bubble');

        let bubbleClasses = [];
        let iconHtml = '';

        if (role === 'user') {
            bubbleClasses.push('user-bubble');
            iconHtml = `<i class="fa-solid fa-user mr-2"></i>`;
        } else {
            bubbleClasses.push('ai-bubble');
            if (type === 'error') {
                bubbleClasses.push('ai-bubble-error');
                iconHtml = `<i class="fa-solid fa-triangle-exclamation mr-2"></i>`;
            } else if (source) {
                iconHtml = `<i class="fa-solid fa-check-circle mr-2"></i>`;
            } else {
                iconHtml = `<i class="fa-solid fa-robot mr-2"></i>`;
            }
        }

        bubble.classList.add(...bubbleClasses);
        const formattedText = text.replace(/\n/g, "<br>");

        // LINE æ¨¡å¼ä¸‹ä¸é¡¯ç¤ºç™¼é€è€…åå­—
        const senderHtml = `<p class="font-bold ${isLineMode ? 'hidden' : ''}">${iconHtml} ${sender}</p>`;

        let sourceHtml = "";
        if (source) {
            sourceHtml = `
            <div class="source">
                <p class="source-title"><i class="fa-solid fa-link mr-1"></i> å¼•ç”¨ä¾†æºï¼š</p>
                <p class="truncate">${source}</p>
            </div>`;
        }

        bubble.innerHTML = `
            ${senderHtml}
            <p class="mt-1 md:mt-2">${formattedText}</p>
            ${sourceHtml}
        `;

        chatContent.appendChild(bubble);
        chatContent.scrollTop = chatContent.scrollHeight;
    }

    function setLoading(isLoading) {
        if (isLoading) {
            loadingIndicator.classList.remove("hidden");
            chatInput.disabled = true;
            sendButton.disabled = true;
        } else {
            loadingIndicator.classList.add("hidden");
            chatInput.disabled = false;
            sendButton.disabled = false;
            // é˜²æ­¢æ‰‹æ©Ÿéµç›¤æ”¶èµ·å¾Œå¤±ç„¦
            if (window.innerWidth > 768) chatInput.focus();
        }
        chatContent.scrollTop = chatContent.scrollHeight;
    }

    // åˆå§‹ç‹€æ…‹
    showLandingView();
    </script>
</body>
</html>
